<html>
<head>
  <title>Disk Space Report</title>
  <link rel="stylesheet" type="text/css" href="report.css">
  <script src="sorttable.js"></script>
  <script type="text/javascript">
    toggleVisible = function(id) {
      var tbl = document.getElementById(id).style;
      if (tbl.display == 'none' || tbl.display == '') {
          tbl.display = 'block';
      } else {
          tbl.display = 'none';
      }
      return false;
    }
  </script>

</head>
<body>
<h2>Disk Space Report: <%= @date %></h2>

<% @args.each do |arg| %>
  <h3><%= arg %></h3>
  <table class="sortable">
    <thead>
      <th class="sorttable_alpha">User</th><th class="right">Disk Space</th><th>Big Directories</th>
    </thead>
    <% @rdata[arg].each do |row| %>
      <tr class="coloured">
        <td sorttable_customkey="<%= row.name %>"><%= row.name %></td>
        <td sorttable_customkey="<%= row.raw %>" class="right"><%= row.friendly %></td>
        <td><% if row.big.length > 0 %>
          <span class="small"><a href="#" onClick="return toggleVisible('<%= arg %>_<%= row.name %>');">Show/Hide</a></span>
          <table id="<%= arg %>_<%= row.name %>" class="hidden" onClick>
            <thead><th>Size</th><th>Path</th></thead>
            <% row.big.each do |big| %>
              <tr><td class="right"><%= big.friendly%></td><td><%= big.path%></td></tr>
            <% end %>
          </table><% end %></td>
      </tr>
    <% end %>
  </table>

<% end %>
</body>
</html>
